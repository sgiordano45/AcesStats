<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="pageTitle">Player Stats</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f8f9fa;
  }
  
  .player-header {
    background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
    color: white;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 30px;
    display: flex;
    align-items: center;
    gap: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .player-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid rgba(255,255,255,0.3);
    display: none;
  }
  
  .player-info {
    flex: 1;
  }
  
  .player-name-section {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
  }
  
  .player-number {
    background-color: rgba(255,255,255,0.2);
    padding: 8px 12px;
    border-radius: 8px;
    font-size: 1.2em;
    font-weight: bold;
  }
  
  .player-name-text h1 {
    margin: 0;
    font-size: 2.2em;
    font-weight: 700;
  }
  
  .player-nickname {
    font-size: 1.1em;
    opacity: 0.9;
    font-style: italic;
  }
  
  .player-details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
  }
  
  .player-details-row2 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-top: 15px;
  }
  
  .detail-item {
    background-color: rgba(255,255,255,0.15);
    padding: 10px 15px;
    border-radius: 8px;
  }
  
  .detail-label {
    font-size: 0.9em;
    opacity: 0.8;
    margin-bottom: 2px;
  }
  
  .detail-value {
    font-size: 1.1em;
    font-weight: bold;
  }
  
  .team-badge {
    padding: 5px 10px;
    background-color: #e9ecef;
    border-radius: 15px;
    font-size: 0.9em;
    font-weight: bold;
  }
  
  .captain-badge {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    color: #333;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: bold;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    border: 1px solid #e6c200;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  .captain-badge::before {
    content: "‚≠ê";
    font-size: 1em;
  }
  
  .player-name-section .captain-badge {
    margin-left: 10px;
  }
  
  /* Master Chef Recognition Section */
  .master-chef-section {
    background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
    color: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 12px rgba(255,107,53,0.3);
    position: relative;
    overflow: hidden;
    display: none;
  }
  
  .master-chef-section::before {
    content: "üë®‚Äçüç≥";
    position: absolute;
    top: -10px;
    right: -10px;
    font-size: 8em;
    opacity: 0.1;
    transform: rotate(15deg);
  }
  
  .master-chef-title {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
  }
  
  .chef-icon {
    font-size: 2.5em;
    background: rgba(255,255,255,0.2);
    padding: 10px;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .master-chef-title h2 {
    margin: 0;
    font-size: 1.8em;
    font-weight: 700;
  }
  
  .chef-subtitle {
    font-size: 1.1em;
    opacity: 0.9;
    margin-bottom: 20px;
  }
  
  .chef-achievements {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
  }
  
  .chef-achievement {
    background: rgba(255,255,255,0.15);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
  }
  
  .chef-achievement-icon {
    font-size: 2em;
    margin-bottom: 8px;
    display: block;
  }
  
  .chef-achievement-title {
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .chef-achievement-desc {
    font-size: 0.9em;
    opacity: 0.8;
  }
  
  /* Awards Section */
  .awards-section {
    background-color: white;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 30px;
  }
  
  .awards-section h2 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 1.3em;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .awards-section h2::before {
    content: "üèÖ";
    font-size: 1.2em;
  }
  
  .awards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
  }
  
  .award-item {
    background-color: #f8f9fa;
    padding: 12px 15px;
    border-radius: 8px;
    border-left: 4px solid #0066cc;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .award-icon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    object-fit: contain;
  }
  
  .award-icon.fallback {
    font-size: 1.3em;
    width: auto;
    height: auto;
  }
  
  .award-details {
    flex: 1;
  }
  
  .award-name {
    font-weight: bold;
    color: #333;
    margin-bottom: 2px;
  }
  
  .award-season {
    font-size: 0.9em;
    color: #666;
  }
  
  .award-count {
    background-color: #0066cc;
    color: white;
    border-radius: 12px;
    padding: 2px 8px;
    font-size: 0.8em;
    font-weight: bold;
    margin-left: auto;
    flex-shrink: 0;
  }
  
  /* Stats Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 30px;
    background-color: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  
  table h2 {
    background-color: #f8f9fa;
    margin: 0;
    padding: 15px 20px;
    border-bottom: 2px solid #dee2e6;
    color: #333;
  }
  
  th, td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #dee2e6;
  }
  
  th {
    background-color: #0066cc;
    color: white;
    font-weight: 600;
    text-align: center;
  }
  
  td {
    text-align: center;
  }
  
  tr:hover {
    background-color: #f8f9fa;
  }
  
  .sub-yes {
    background-color: #ffeaa7;
    color: #d63031;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: bold;
  }
  
  .team-link {
    color: #0066cc;
    text-decoration: none;
    font-weight: bold;
  }
  
  .team-link:hover {
    text-decoration: underline;
  }
  
  /* Back button */
  .back-button {
    background-color: #6c757d;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin-bottom: 20px;
    text-decoration: none;
    display: inline-block;
  }
  
  .back-button:hover {
    background-color: #5a6268;
  }
  
  /* Mobile responsive */
  @media (max-width: 768px) {
    .player-header {
      flex-direction: column;
      text-align: center;
    }
    
    .player-name-section {
      flex-direction: column;
      gap: 10px;
    }
    
    .player-details,
    .player-details-row2 {
      grid-template-columns: 1fr;
    }
    
    .chef-achievements {
      grid-template-columns: 1fr;
    }
    
    .awards-grid {
      grid-template-columns: 1fr;
    }
    
    th, td {
      padding: 8px 6px;
      font-size: 0.9em;
    }
  }
  
  /* Show photo when available */
  .player-photo.loaded {
    display: block;
  }
</style>
</head>
<body>

<button class="back-button" onclick="goBack()">‚Üê Back</button>

<div class="player-header" id="playerHeader">
  <img id="playerPhoto" class="player-photo" alt="Player Photo" onerror="this.style.display='none';">
  
  <div class="player-info">
    <div class="player-name-section">
      <div id="playerNumber" class="player-number" style="display: none;">#</div>
      <div class="player-name-text">
        <h1 id="playerName">Player Name</h1>
        <div id="playerNickname" class="player-nickname" style="display: none;"></div>
      </div>
    </div>
    
    <!-- First row: Team/Career/Seasons -->
    <div class="player-details" id="playerDetails">
      <!-- Player details will be populated dynamically -->
    </div>
    
    <!-- Second row: Batting/Throwing/Position (forced to second row) -->
    <div class="player-details-row2" id="playerDetailsRow2">
      <!-- Additional player details will be populated dynamically -->
    </div>
  </div>
</div>

<!-- Master Chef Recognition Section - Only shows for Mike Streaman -->
<div class="master-chef-section" id="masterChefSection">
  <div class="master-chef-title">
    <div class="chef-icon">üë®‚Äçüç≥</div>
    <div>
      <h2>Master Chef Recognition</h2>
      <div class="chef-subtitle">The heart and soul of every game day feast</div>
    </div>
  </div>
  
  <div class="chef-achievements">
    <div class="chef-achievement">
      <span class="chef-achievement-icon">üçΩÔ∏è</span>
      <div class="chef-achievement-title">Every Game Chef</div>
      <div class="chef-achievement-desc">Cooks for every single game - rain or shine</div>
    </div>
    
    <div class="chef-achievement">
      <span class="chef-achievement-icon">üë®‚Äçüë¶</span>
      <div class="chef-achievement-title">Team Dad</div>
      <div class="chef-achievement-desc">Father of Andrew Streaman, supporting the next generation</div>
    </div>
    
    <div class="chef-achievement">
      <span class="chef-achievement-icon">üèÜ</span>
      <div class="chef-achievement-title">Culinary MVP</div>
      <div class="chef-achievement-desc">Keeping the team well-fed and energized</div>
    </div>
    
    <div class="chef-achievement">
      <span class="chef-achievement-icon">‚ù§Ô∏è</span>
      <div class="chef-achievement-title">Team Spirit</div>
      <div class="chef-achievement-desc">Bringing everyone together through food</div>
    </div>
  </div>
</div>

<!-- Awards Section - Moved above Regular Season Stats -->
<div class="awards-section" id="awardsSection" style="display: none;">
  <h2>Awards & Recognition</h2>
  <div class="awards-grid" id="awardsGrid">
    <!-- Awards will be populated dynamically -->
  </div>
</div>

<h2>Regular Season Stats</h2>
<table id="regularStatsTable">
  <thead>
    <tr>
      <th>Year</th>
      <th>Season</th>
      <th>Team</th>
      <th>Games</th>
      <th>At Bats</th>
      <th>Hits</th>
      <th>Runs</th>
      <th>Walks</th>
      <th>AcesBPI</th>
      <th>BA</th>
      <th>OBP</th>
      <th>Sub</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Substitute Season Stats</h2>
<table id="subStatsTable">
  <thead>
    <tr>
      <th>Year</th>
      <th>Season</th>
      <th>Team</th>
      <th>Games</th>
      <th>At Bats</th>
      <th>Hits</th>
      <th>Runs</th>
      <th>Walks</th>
      <th>AcesBPI</th>
      <th>BA</th>
      <th>OBP</th>
      <th>Sub</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Career Stats</h2>
<table id="careerStatsTable">
  <thead>
    <tr>
      <th>Category</th>
      <th>Games</th>
      <th>At Bats</th>
      <th>Hits</th>
      <th>Runs</th>
      <th>Walks</th>
      <th>Avg AcesBPI</th>
      <th>BA</th>
      <th>OBP</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script src="player.js"></script>
<script>
// Function to handle Master Chef section visibility
function handleMasterChefSection() {
  const chefSection = document.getElementById('masterChefSection');
  
  if (playerName === 'Mike Streaman') {
    // Show the Master Chef section for Mike Streaman
    if (chefSection) {
      chefSection.style.display = 'block';
      
      // Add animation
      setTimeout(() => {
        chefSection.style.transform = 'scale(1.02)';
        setTimeout(() => {
          chefSection.style.transform = 'scale(1)';
        }, 200);
      }, 500);
      
      // Make achievements interactive
      const achievements = document.querySelectorAll('.chef-achievement');
      achievements.forEach(achievement => {
        achievement.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-2px)';
          this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
        });
        
        achievement.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0)';
          this.style.boxShadow = 'none';
        });
      });
    }
  } else {
    // Hide the Master Chef section for all other players
    if (chefSection) {
      chefSection.style.display = 'none';
    }
  }
}

// Override the original populatePlayerDetails function to use the new layout
function populatePlayerDetails(years, totalSeasons, currentTeam, playerInfo) {
  const detailsContainer = document.getElementById('playerDetails');
  const detailsRow2Container = document.getElementById('playerDetailsRow2');
  
  // First row: Team, Career, Total Seasons
  detailsContainer.innerHTML = `
    <div class="detail-item">
      <div class="detail-label">Team</div>
      <div class="detail-value">${currentTeam || 'N/A'}</div>
    </div>
    <div class="detail-item">
      <div class="detail-label">Career</div>
      <div class="detail-value">${years.length > 0 ? `${years[0]} - ${years[years.length - 1]}` : 'N/A'}</div>
    </div>
    <div class="detail-item">
      <div class="detail-label">Total Seasons</div>
      <div class="detail-value">${totalSeasons}</div>
    </div>
  `;
  
  // Second row: Batting, Throwing, Position (always show these 3 in this order)
  let row2HTML = '';
  
  // Batting
  if (playerInfo && playerInfo.bats && playerInfo.bats.trim() !== '') {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Batting</div>
        <div class="detail-value">${playerInfo.bats}</div>
      </div>
    `;
  } else {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Batting</div>
        <div class="detail-value">-</div>
      </div>
    `;
  }
  
  // Throwing
  if (playerInfo && playerInfo.throws && playerInfo.throws.trim() !== '') {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Throwing</div>
        <div class="detail-value">${playerInfo.throws}</div>
      </div>
    `;
  } else {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Throwing</div>
        <div class="detail-value">-</div>
      </div>
    `;
  }
  
  // Position
  if (playerInfo && playerInfo.position && playerInfo.position.trim() !== '') {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Position</div>
        <div class="detail-value">${playerInfo.position}</div>
      </div>
    `;
  } else {
    row2HTML += `
      <div class="detail-item">
        <div class="detail-label">Position</div>
        <div class="detail-value">-</div>
      </div>
    `;
  }
  
  detailsRow2Container.innerHTML = row2HTML;
  
  // Handle player number in the name section
  const numberElement = document.getElementById('playerNumber');
  if (playerInfo && playerInfo.number && playerInfo.number.trim() !== '') {
    numberElement.textContent = `#${playerInfo.number}`;
    numberElement.style.display = 'block';
  } else {
    numberElement.style.display = 'none';
  }
  
  // Handle nickname
  const nicknameElement = document.getElementById('playerNickname');
  if (playerInfo && playerInfo.nickname && playerInfo.nickname.trim() !== '') {
    nicknameElement.textContent = `"${playerInfo.nickname}"`;
    nicknameElement.style.display = 'block';
  } else {
    nicknameElement.style.display = 'none';
  }
  
  // Handle player photo
  const photoElement = document.getElementById('playerPhoto');
  if (playerInfo && playerInfo.photo && playerInfo.photo.trim() !== '') {
    photoElement.src = playerInfo.photo;
    photoElement.style.display = 'block';
    photoElement.classList.add('loaded');
  }
}

// Override the renderPlayerAwards function to restore the card-based format with All-Time Top 10
function renderPlayerAwards(playerData) {
  // Filter awards for this specific player
  const playerAwards = allAwards.filter(award => 
    award.Player && award.Player.trim() === playerName && award.Award && award.Award.trim() !== ""
  );
  
  // Calculate player's all-time rankings for the top 10 section
  const playerRankings = calculatePlayerRankings(playerData);
  
  // If no awards and no top 10 rankings, hide section
  if (playerAwards.length === 0 && Object.keys(playerRankings).length === 0) {
    const awardsSection = document.getElementById('awardsSection');
    if (awardsSection) awardsSection.style.display = 'none';
    return;
  }
  
  // Create the enhanced awards section HTML
  let awardsHTML = `
    <div style="background-color: white; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
      <h2 style="margin: 0 0 20px 0; color: #333; font-size: 1.3em; background-color: #0066cc; color: white; padding: 10px 15px; border-radius: 6px;">
        üèÖ Awards & Recognition
      </h2>
  `;
  
  // Add All-Time Top 10 Rankings section if player has rankings
  if (Object.keys(playerRankings).length > 0) {
    awardsHTML += `
      <div style="margin-bottom: 25px;">
        <h3 style="background-color: #ffa500; color: white; padding: 8px 12px; margin: 0 0 15px 0; border-radius: 4px; font-size: 1.1em;">
          ‚≠ê All-Time Top 10 Rankings
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
    `;
    
    // Add ranking cards
    Object.entries(playerRankings).forEach(([statName, data]) => {
      const rankIcon = data.rank <= 3 ? 'ü•á' : data.rank <= 5 ? 'ü•à' : 'ü•â';
      awardsHTML += `
        <div style="border: 2px solid #ffa500; border-radius: 8px; padding: 15px; text-align: center; background-color: #fff8e1;">
          <div style="font-size: 2em; margin-bottom: 5px;">${rankIcon}</div>
          <div style="background-color: #0066cc; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold; margin-bottom: 8px;">
            #${data.rank}
          </div>
          <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">${statName}</div>
          <div style="font-size: 1.2em; font-weight: bold; color: #333;">${data.value}</div>
        </div>
      `;
    });
    
    awardsHTML += `
        </div>
      </div>
    `;
  }
  
  // Add Career Awards & Honors section if player has awards
  if (playerAwards.length > 0) {
    // Group awards by name and count occurrences
    const awardGroups = {};
    playerAwards.forEach(award => {
      const awardName = award.Award.trim();
      if (!awardGroups[awardName]) {
        awardGroups[awardName] = {
          name: awardName,
          count: 0,
          seasons: []
        };
      }
      awardGroups[awardName].count++;
      awardGroups[awardName].seasons.push(`${award.Year} ${award.Season}`);
    });
    
    awardsHTML += `
      <div>
        <h3 style="background-color: #dc3545; color: white; padding: 8px 12px; margin: 0 0 15px 0; border-radius: 4px; font-size: 1.1em;">
          üèÜ Career Awards & Honors
        </h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
    `;
    
    // Award icons mapping
    const awardIcons = {
      'Team MVP': 'üëë',
      'All Aces': '‚≠ê',
      'Gold Glove': 'ü•á',
      'Team of the Year': 'üèÜ',
      'Rookie of the Year': 'üåü',
      'Most Improved Ace': 'üìà',
      'Comeback Player of the Year': 'üí™',
      'Slugger of the Year': '‚öæ',
      'Pitcher of the Year': 'üéØ',
      'Captain of the Year': 'üë®‚Äç‚úàÔ∏è',
      'Al Pineda Good Guy Award': 'üòá',
      'Iron Man Award': 'üõ°Ô∏è',
      'Sub of the Year': 'üîÑ'
    };
    
    // Sort awards by importance
    const awardOrder = [
      'Team MVP', 'All Aces', 'Gold Glove', 'Team of the Year',
      'Rookie of the Year', 'Most Improved Ace', 'Comeback Player of the Year',
      'Slugger of the Year', 'Pitcher of the Year', 'Captain of the Year',
      'Al Pineda Good Guy Award', 'Iron Man Award', 'Sub of the Year'
    ];
    
    const sortedAwards = Object.values(awardGroups).sort((a, b) => {
      const aIndex = awardOrder.indexOf(a.name);
      const bIndex = awardOrder.indexOf(b.name);
      
      if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;
      if (aIndex !== -1) return -1;
      if (bIndex !== -1) return 1;
      return a.name.localeCompare(b.name);
    });
    
    // Generate award cards
    sortedAwards.forEach(award => {
      const icon = awardIcons[award.name] || 'üèÖ';
      const seasonsText = award.seasons.length <= 3 ? 
        award.seasons.join(', ') : 
        `${award.seasons.slice(0, 2).join(', ')}, +${award.seasons.length - 2} more`;
      
      awardsHTML += `
        <div style="border: 2px solid #0066cc; border-radius: 8px; padding: 15px; background-color: #f8f9fa; display: flex; align-items: center; gap: 15px;">
          <div style="font-size: 2.5em; background-color: #0066cc; color: white; padding: 10px; border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
            ${icon}
          </div>
          <div style="flex: 1;">
            <div style="font-weight: bold; color: #333; margin-bottom: 5px; font-size: 1.1em;">${award.name}</div>
            <div style="font-size: 0.9em; color: #666;">${seasonsText}</div>
          </div>
          ${award.count > 1 ? `<div style="background-color: #0066cc; color: white; border-radius: 12px; padding: 4px 8px; font-size: 0.8em; font-weight: bold;">${award.count}√ó</div>` : ''}
        </div>
      `;
    });
    
    awardsHTML += `
        </div>
      </div>
    `;
  }
  
  awardsHTML += `</div>`;
  
  // Insert awards section before the regular stats table
  const regularStatsTable = document.getElementById('regularStatsTable');
  if (regularStatsTable && regularStatsTable.parentNode) {
    // Remove any existing awards section first
    const existingAwards = document.querySelector('.enhanced-awards-section');
    if (existingAwards) {
      existingAwards.remove();
    }
    
    // Create and insert the new awards section
    const awardsDiv = document.createElement('div');
    awardsDiv.className = 'enhanced-awards-section';
    awardsDiv.innerHTML = awardsHTML;
    regularStatsTable.parentNode.insertBefore(awardsDiv, regularStatsTable);
  }
  
  // Hide the original awards section since we're using the enhanced one
  const originalAwardsSection = document.getElementById('awardsSection');
  if (originalAwardsSection) {
    originalAwardsSection.style.display = 'none';
  }
}

// Function to calculate player rankings for top 10 display
function calculatePlayerRankings(playerData) {
  // This would need to be implemented based on your all-time stats data
  // For now, return empty object - you'll need to integrate with your actual rankings calculation
  const rankings = {};
  
  // Example of how rankings might be calculated:
  // if (playerStats.careerBA >= topThreshold) rankings['Career Batting Average'] = { rank: X, value: playerStats.careerBA };
  // if (playerStats.careerHits >= topThreshold) rankings['Career Hits'] = { rank: Y, value: playerStats.careerHits };
  
  return rankings;
}

// Call handleMasterChefSection after the page loads
document.addEventListener('DOMContentLoaded', function() {
  // Give a small delay to ensure playerName is set
  setTimeout(handleMasterChefSection, 100);
});
</script>

</body>
</html>